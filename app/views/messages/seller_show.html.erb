<div class="container">
  <div class="row">
    <div class="messages-all mr-auto ml-auto">
      <% @buyers.each do |buyer| %>
        <div class="messages">
          <div class="message-link"><%= buyer.name %></div>

          <div class="message-holder">
            <% buyer.messages.where(seller_id: @seller_id).each do |message| %>
              <p class="message <%= message.sender %>">
                <%= message.content %>
              </p>
            <% end %>
          
            <p class="text-center reply-btn">
              <%= link_to 'Reply', new_seller_message_path(buyer), class: 'reply-link' %>
            </p>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>


<style media="screen">
  .true {
    border: 1px solid #57BDB5;
    text-align: right;
    margin-left: auto;
  }

  .false {
    background-color: rgba(81, 190, 181, 1);
    border: 1px solid #57BDB5;
    text-align: left;
  }
</style>


<script type="text/javascript">
  $(document).ready( () => {
    $('.message-holder').hide();
    $('.message-link').css('background-color', 'rgba(255, 255, 255, 0)');
    
    $('.message-link').click( function() {
      $('.message-link').css('background-color', 'rgba(255, 255, 255, 0)');
      let clicky = $(this).siblings('.message-holder');
      clicky.show();
      $(this).css('background-color', 'rgba(81, 190, 181, 0.2)');
      $('.message-holder').not(clicky).hide();
    })
  })
</script>